!function(j){j.fn.styler=function(y){return y=j.extend({wrapper:"form",idSuffix:"-styler",filePlaceholder:"Р¤Р°Р№Р» РЅРµ РІС‹Р±СЂР°РЅ",fileBrowse:"РћР±Р·РѕСЂ...",selectSearch:!0,selectSearchLimit:10,selectSearchNotFound:"РЎРѕРІРїР°РґРµРЅРёР№ РЅРµ РЅР°Р№РґРµРЅРѕ",selectSearchPlaceholder:"РџРѕРёСЃРє...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}},y),this.each(function(){function q(){var e="",s="",t="",i="";void 0!==k.attr("id")&&""!=k.attr("id")&&(e=' id="'+k.attr("id")+y.idSuffix+'"'),void 0!==k.attr("title")&&""!=k.attr("title")&&(s=' title="'+k.attr("title")+'"'),void 0!==k.attr("class")&&""!=k.attr("class")&&(t=" "+k.attr("class"));var l,o=k.data();for(l in o)""!=o[l]&&(i+=" data-"+l+'="'+o[l]+'"');this.id=e+i,this.title=s,this.classes=t}var k=j(this);k.is(":checkbox")?k.each(function(){if(k.parent("div.jq-checkbox").length<1){var e=function(){var e=new q,s=j("<div"+e.id+' class="jq-checkbox'+e.classes+'"'+e.title+'><div class="jq-checkbox__div"></div></div>');k.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(s).prependTo(s),s.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"}),k.is(":checked")&&s.addClass("checked"),k.is(":disabled")&&s.addClass("disabled"),s.click(function(){return s.is(".disabled")||(k.is(":checked")?(k.prop("checked",!1),s.removeClass("checked")):(k.prop("checked",!0),s.addClass("checked")),k.change()),!1}),k.closest("label").add('label[for="'+k.attr("id")+'"]').click(function(e){s.click(),e.preventDefault()}),k.change(function(){k.is(":checked")?s.addClass("checked"):s.removeClass("checked")}).keydown(function(e){32==e.which&&s.click()}).focus(function(){s.is(".disabled")||s.addClass("focused")}).blur(function(){s.removeClass("focused")})};e(),k.on("refresh",function(){k.parent().before(k).remove(),e()})}}):k.is(":radio")?k.each(function(){if(k.parent("div.jq-radio").length<1){var e=function(){var e=new q,s=j("<div"+e.id+' class="jq-radio'+e.classes+'"'+e.title+'><div class="jq-radio__div"></div></div>');k.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(s).prependTo(s),s.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"}),k.is(":checked")&&s.addClass("checked"),k.is(":disabled")&&s.addClass("disabled"),s.click(function(){return s.is(".disabled")||(s.closest(y.wrapper).find('input[name="'+k.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),k.prop("checked",!0).parent().addClass("checked"),k.change()),!1}),k.closest("label").add('label[for="'+k.attr("id")+'"]').click(function(e){s.click(),e.preventDefault()}),k.change(function(){k.parent().addClass("checked")}).focus(function(){s.is(".disabled")||s.addClass("focused")}).blur(function(){s.removeClass("focused")})};e(),k.on("refresh",function(){k.parent().before(k).remove(),e()})}}):k.is(":file")?k.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0}).each(function(){if(k.parent("div.jq-file").length<1){var e=function(){var e=new q,s=j("<div"+e.id+' class="jq-file'+e.classes+'"'+e.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),t=j('<div class="jq-file__name">'+y.filePlaceholder+"</div>").appendTo(s);j('<div class="jq-file__browse">'+y.fileBrowse+"</div>").appendTo(s),k.after(s),s.append(k),k.is(":disabled")&&s.addClass("disabled"),k.change(function(){t.text(k.val().replace(/.+[\\\/]/,"")),""==k.val()&&t.text(y.filePlaceholder)}).focus(function(){s.addClass("focused")}).blur(function(){s.removeClass("focused")}).click(function(){s.removeClass("focused")})};e(),k.on("refresh",function(){k.parent().before(k).remove(),e()})}}):k.is("select")?k.each(function(){if(k.parent("div.jqselect").length<1){var e=function(){function m(e){e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){var s=null;"mousewheel"==e.type?s=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"==e.type&&(s=40*e.originalEvent.detail),s&&(e.stopPropagation(),e.preventDefault(),j(this).scrollTop(s+j(this).scrollTop()))})}function x(){for(i=0,len=C.length;i<len;i++){var e="",s="",t=e="",l="",o="";C.eq(i).prop("selected")&&(s="selected sel"),C.eq(i).is(":disabled")&&(s="disabled"),C.eq(i).is(":selected:disabled")&&(s="selected sel disabled"),void 0!==C.eq(i).attr("class")&&(t=" "+C.eq(i).attr("class"),o=' data-jqfs-class="'+C.eq(i).attr("class")+'"');var c,a=C.eq(i).data();for(c in a)""!=a[c]&&(e+=" data-"+c+'="'+a[c]+'"');e="<li"+o+e+' class="'+s+t+'">'+C.eq(i).text()+"</li>",C.eq(i).parent().is("optgroup")&&(void 0!==C.eq(i).parent().attr("class")&&(l=" "+C.eq(i).parent().attr("class")),e="<li"+o+' class="'+s+t+" option"+l+'">'+C.eq(i).text()+"</li>",C.eq(i).is(":first-child")&&(e='<li class="optgroup'+l+'">'+C.eq(i).parent().attr("label")+"</li>"+e)),w+=e}}var C=j("option",k),w="";k.is("[multiple]")?function(){var e=new q,l=j("<div"+e.id+' class="jq-select-multiple jqselect'+e.classes+'"'+e.title+' style="display: inline-block; position: relative"></div>');k.css({margin:0,padding:0}).after(l),x(),l.append("<ul>"+w+"</ul>");var s=j("ul",l).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),o=j("li",l).attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none","white-space":"nowrap"}),t=(e=k.attr("size"),s.outerHeight()),i=o.outerHeight();void 0!==e&&0<e?s.css({height:i*e}):s.css({height:4*i}),t>l.height()&&(s.css("overflowY","scroll"),m(s),o.filter(".selected").length&&s.scrollTop(s.scrollTop()+o.filter(".selected").position().top)),k.prependTo(l).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0}),k.is(":disabled")?(l.addClass("disabled"),C.each(function(){j(this).is(":selected")&&o.eq(j(this).index()).addClass("selected")})):(o.filter(":not(.disabled):not(.optgroup)").click(function(e){k.focus(),l.removeClass("focused");var s=j(this);if(e.ctrlKey||e.metaKey||s.addClass("selected"),e.shiftKey||s.addClass("first"),e.ctrlKey||e.metaKey||e.shiftKey||s.siblings().removeClass("selected first"),(e.ctrlKey||e.metaKey)&&(s.is(".selected")?s.removeClass("selected first"):s.addClass("selected first"),s.siblings().removeClass("first")),e.shiftKey){var t=!1,i=!1;s.siblings().removeClass("selected").siblings(".first").addClass("selected"),s.prevAll().each(function(){j(this).is(".first")&&(t=!0)}),s.nextAll().each(function(){j(this).is(".first")&&(i=!0)}),t&&s.prevAll().each(function(){if(j(this).is(".selected"))return!1;j(this).not(".disabled, .optgroup").addClass("selected")}),i&&s.nextAll().each(function(){if(j(this).is(".selected"))return!1;j(this).not(".disabled, .optgroup").addClass("selected")}),1==o.filter(".selected").length&&s.addClass("first")}C.prop("selected",!1),o.filter(".selected").each(function(){var e=j(this),s=e.index();e.is(".option")&&(s-=e.prevAll(".optgroup").length),C.eq(s).prop("selected",!0)}),k.change()}),C.each(function(e){j(this).data("optionIndex",e)}),k.change(function(){o.removeClass("selected");var s=[];C.filter(":selected").each(function(){s.push(j(this).data("optionIndex"))}),o.not(".optgroup").filter(function(e){return-1<j.inArray(e,s)}).addClass("selected")}).focus(function(){l.addClass("focused")}).blur(function(){l.removeClass("focused")}),t>l.height()&&k.keydown(function(e){38!=e.which&&37!=e.which&&33!=e.which||s.scrollTop(s.scrollTop()+o.filter(".selected").position().top-i),40!=e.which&&39!=e.which&&34!=e.which||s.scrollTop(s.scrollTop()+o.filter(".selected:last").position().top-s.innerHeight()+2*i)}))}():function(){var e=new q,a=j("<div"+e.id+' class="jq-selectbox jqselect'+e.classes+'" style="display: inline-block; position: relative; z-index:'+y.singleSelectzIndex+'"><div class="jq-selectbox__select"'+e.title+' style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>');k.css({margin:0,padding:0}).after(a).prependTo(a),e=j("div.jq-selectbox__select",a);var i=j("div.jq-selectbox__select-text",a),s=C.filter(":selected");s.length?i.html(s.text()):i.html(C.first().text()),x();var t="";y.selectSearch&&(t='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+y.selectSearchPlaceholder+'"></div><div class="jq-selectbox__not-found">'+y.selectSearchNotFound+"</div>");var n=j('<div class="jq-selectbox__dropdown" style="position: absolute">'+t+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+w+"</ul></div>");a.append(n);var d=j("ul",n),r=j("li",n),h=j("input",n),f=j("div.jq-selectbox__not-found",n).hide();r.length<y.selectSearchLimit&&h.parent().hide();var l=0,o=0;r.each(function(){var e=j(this);e.css({display:"inline-block","white-space":"nowrap"}),e.innerWidth()>l&&(l=e.innerWidth(),o=e.width()),e.css({display:"block"})});var c=(t=a.clone().appendTo("body").width("auto")).width();t.remove(),c==a.width()&&(i.width(o),l+=a.find("div.jq-selectbox__trigger").width()),l>a.width()&&n.width(l),k.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var p=a.outerHeight(),u=h.outerHeight(),v=d.css("max-height");(t=r.filter(".selected")).length<1&&r.first().addClass("selected sel"),void 0===r.data("li-height")&&r.data("li-height",r.outerHeight());var g=n.css("top");if("auto"==n.css("left")&&n.css({left:0}),"auto"==n.css("top")&&n.css({top:p}),n.hide(),t.length&&(C.first().text()!=s.text()&&a.addClass("changed"),a.data("jqfs-class",t.data("jqfs-class")),a.addClass(t.data("jqfs-class"))),k.is(":disabled"))return a.addClass("disabled");e.click(function(){if(k.focus(),j("div.jq-selectbox").filter(".opened").length&&y.onSelectClosed.call(j("div.jq-selectbox").filter(".opened")),!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)){if(y.selectSmartPositioning){var e=j(window),s=a.offset().top,t=e.height()-p-(s-e.scrollTop()),i=y.selectVisibleOptions,l=r.data("li-height"),o=5*l,c=l*i;0<i&&i<6&&(o=c),0==i&&(c="auto"),o+u+20<t?(n.height("auto").css({bottom:"auto",top:g}),(i=function(){d.css("max-height",Math.floor((t-20-u)/l)*l)})(),d.css("max-height",c),"none"!=v&&d.css("max-height",v),t<n.outerHeight()+20&&i()):(n.height("auto").css({top:"auto",bottom:g}),(i=function(){d.css("max-height",Math.floor((s-e.scrollTop()-20-u)/l)*l)})(),d.css("max-height",c),"none"!=v&&d.css("max-height",v),s-e.scrollTop()-20<n.outerHeight()+20&&i())}return j("div.jqselect").css({zIndex:y.singleSelectzIndex-1}).removeClass("opened focused"),a.css({zIndex:y.singleSelectzIndex}),n.is(":hidden")?(j("div.jq-selectbox__dropdown:visible").hide(),n.show(),a.addClass("opened"),y.onSelectOpened.call(a)):(n.hide(),a.removeClass("opened"),j("div.jq-selectbox").filter(".opened").length&&y.onSelectClosed.call(a)),r.filter(".selected").length&&(0!=d.innerHeight()/l%2&&(l/=2),d.scrollTop(d.scrollTop()+r.filter(".selected").position().top-d.innerHeight()/2+l)),h.length&&(h.val("").keyup(),f.hide(),h.focus().keyup(function(){var e=j(this).val();r.each(function(){j(this).html().match(RegExp(".*?"+e+".*?","i"))?j(this).show():j(this).hide()}),r.filter(":visible").length<1?f.show():f.hide()})),m(d),!1}}),r.hover(function(){j(this).siblings().removeClass("selected")});var b=r.filter(".selected").text();r.filter(".selected").text(),r.filter(":not(.disabled):not(.optgroup)").click(function(){var e=j(this),s=e.text();if(b!=s){var t=e.index();e.is(".option")&&(t-=e.prevAll(".optgroup").length),e.addClass("selected sel").siblings().removeClass("selected sel"),C.prop("selected",!1).eq(t).prop("selected",!0),b=s,i.html(s),C.first().text()!=s?a.addClass("changed"):a.removeClass("changed"),a.data("jqfs-class")&&a.removeClass(a.data("jqfs-class")),a.data("jqfs-class",e.data("jqfs-class")),a.addClass(e.data("jqfs-class")),k.change()}h.length&&(h.val("").keyup(),f.hide()),n.hide(),a.removeClass("opened"),y.onSelectClosed.call(a)}),n.mouseout(function(){j("li.sel",n).addClass("selected")}),k.change(function(){i.html(C.filter(":selected").text()),r.removeClass("selected sel").not(".optgroup").eq(k[0].selectedIndex).addClass("selected sel")}).focus(function(){a.addClass("focused")}).blur(function(){a.removeClass("focused")}).on("keydown keyup",function(e){i.text(C.filter(":selected").text()),r.removeClass("selected sel").not(".optgroup").eq(k[0].selectedIndex).addClass("selected sel"),38!=e.which&&37!=e.which&&33!=e.which||n.scrollTop(n.scrollTop()+r.filter(".selected").position().top),40!=e.which&&39!=e.which&&34!=e.which||n.scrollTop(n.scrollTop()+r.filter(".selected").position().top-n.innerHeight()+liHeight),13==e.which&&n.hide()}),j(document).on("click",function(e){j(e.target).parents().hasClass("jq-selectbox")||"OPTION"==e.target.nodeName||(j("div.jq-selectbox").filter(".opened").length&&y.onSelectClosed.call(j("div.jq-selectbox").filter(".opened")),h.length&&h.val("").keyup(),n.hide().find("li.sel").addClass("selected"),a.removeClass("focused opened"))})}()};e(),k.on("refresh",function(){k.parent().before(k).remove(),e()})}}):k.is(":reset")&&k.click(function(){setTimeout(function(){k.closest(y.wrapper).find("input, select").trigger("refresh")},1)})}).promise().done(function(){y.onFormStyled.call()})}}(jQuery);